# 镜像
# 已在 docker-compose.prod.yml 中写死为 Aliyun ACR（backend/web 均为 :latest），这里无需配置。

# 后端端口
BACKEND_PORT=8080
WEB_PORT=80

# Web 运行时配置（Vue 运营端）
# - WEB_ENV：config.js 选择环境（dev/test/prod）
# - WEB_API_BASE_URL：可选，直接覆盖 API base（例如 https://api.example.com）
WEB_ENV=prod
WEB_API_BASE_URL=

# 数据库连接（示例：生产通常为外部 MySQL/RDS）
# 如使用本 docker-compose 内置 MySQL 容器，建议：
# - MYSQL_HOST=mysql
# - MYSQL_HOST_PORT 用于宿主机暴露端口（可选）
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_HOST_PORT=3306
# MySQL 容器账号/密码已在 docker-compose.prod.yml 中写死为 root/123456，并初始化库 howtotalk
MYSQL_DATABASE=howtotalk
MYSQL_USERNAME=root
MYSQL_PASSWORD=123456

# Redis（用于每日自测会话缓存/换题判重）
REDIS_HOST=redis
REDIS_PORT=6379
DAILY_ASSESSMENT_SESSION_TTL_SECONDS=7200

# CORS（生产建议收敛到运营端域名/管理端域名）
CORS_ALLOWED_ORIGINS=
CORS_ALLOW_CREDENTIALS=false

# OSS（用于头像/日记图片上传）
OSS_ENABLED=false
OSS_ENDPOINT=oss-cn-beijing.aliyuncs.com
OSS_ACCESS_KEY_ID=change_me
OSS_ACCESS_KEY_SECRET=change_me
OSS_BUCKET=change_me
OSS_PUBLIC_BASE_URL=
OSS_AVATAR_PREFIX=avatars
OSS_DIARY_PREFIX=diaries

# JWT（示例：请使用强随机值，并通过密钥管理注入）
JWT_SECRET_MINIPROGRAM=change_me
JWT_SECRET_ADMIN=change_me
JWT_TTL_SECONDS=2592000

# 微信小程序（示例）
WECHAT_APPID=change_me
WECHAT_SECRET=change_me

# 微信支付（商户，WeChat Pay v3，小程序 JSAPI 示例）
WECHAT_PAY_MCH_ID=change_me
WECHAT_PAY_MCH_SERIAL_NO=change_me
WECHAT_PAY_API_V3_KEY=change_me
# 建议以文件挂载方式提供私钥，避免明文进入环境变量与日志
WECHAT_PAY_PRIVATE_KEY_PATH=/run/secrets/wechat_pay_private_key.pem
# 微信支付验签模式：PLATFORM_PUBLIC_KEY（公钥）/ PLATFORM_CERT（平台证书自动更新）
WECHAT_PAY_VERIFY_MODE=PLATFORM_PUBLIC_KEY
# 平台公钥模式需要以下两项（Wechatpay-Serial 对应 public key id）
WECHAT_PAY_PUBLIC_KEY_ID=change_me
WECHAT_PAY_PUBLIC_KEY_PATH=/run/secrets/wechat_pay_public_key.pem
WECHAT_PAY_NOTIFY_URL=https://api.example.com/api/v1/pay/wechat/notify

# 模型网关（示例）
# OpenAI 兼容
AI_BASE_URL=https://api.openai.com
AI_API_KEY=change_me
AI_MODEL=gpt-4o-mini
AI_CHAT_COMPLETIONS_PATH=/v1/chat/completions
