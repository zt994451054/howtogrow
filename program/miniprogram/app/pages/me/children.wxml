<view class="page">
  <ui-header title="å­©å­ç®¡ç†" left="back" bind:left="onBack" />

  <scroll-view class="body safe-bottom" scroll-y="true" enhanced="true" show-scrollbar="false">
    <view class="wrap">
      <view wx:for="{{children}}" wx:key="id" class="row-card row between">
        <view class="row">
          <view class="face {{item.gender == 1 ? 'boy' : item.gender == 2 ? 'girl' : 'unk'}}">
            <text>{{item.gender == 1 ? 'ğŸ‘¦' : item.gender == 2 ? 'ğŸ‘§' : 'ğŸ™‚'}}</text>
          </view>
          <view class="col meta">
            <view class="name">{{item.nickname}}</view>
            <view class="sub">{{item.age}}å² Â· {{item.birthDate}}</view>
          </view>
        </view>
        <view class="right" />
      </view>

      <view wx:if="{{isAdding}}" class="form">
        <view class="form__title">æ·»åŠ æ–°å­©å­</view>

        <view class="field">
          <view class="label">å­©å­æ˜µç§°</view>
          <input class="input" placeholder="è¯·è¾“å…¥æ˜µç§°" value="{{nickname}}" bindinput="onNickname" focus="{{true}}" />
        </view>

        <view class="field">
          <view class="label">æ€§åˆ«</view>
          <view class="row gender">
            <view class="g {{gender == 1 ? 'on boy' : 'off'}}" bindtap="setBoy">
              <text class="g__icon">ğŸ‘¦</text>
              <text class="g__text">ç”·å­©</text>
            </view>
            <view class="g {{gender == 2 ? 'on girl' : 'off'}}" bindtap="setGirl">
              <text class="g__icon">ğŸ‘§</text>
              <text class="g__text">å¥³å­©</text>
            </view>
          </view>
        </view>

        <view class="field">
          <view class="label">å‡ºç”Ÿæ—¥æœŸ</view>
          <picker mode="date" value="{{birthDate}}" start="1900-01-01" end="{{today}}" bindchange="onBirthDate">
            <view class="date">{{birthDate || 'è¯·é€‰æ‹©æ—¥æœŸ'}}</view>
          </picker>
        </view>

        <view class="row actions">
          <button class="save" loading="{{saving}}" bindtap="onSave">ä¿å­˜</button>
          <button class="cancel" bindtap="onCancel">å–æ¶ˆ</button>
        </view>
      </view>

      <button wx:else class="add" bindtap="onAdd">
        <text class="add__icon">ï¼‹</text>
        æ·»åŠ å­©å­
      </button>
    </view>
  </scroll-view>
</view>
